# socketとは
- プログラムがデータを交換する窓口
- ネットワーク通信の接続口を指す場合もある

## 概要
- 通信を行うための拠点となる特殊ファイル
    - 様々な通信があるところ、まとめてファイルとして扱うための存在
- 通常は無名ファイルなのでファイルシステム上では見えない存在だが、名前付きのソケットファイルの作成は可能
    - `ls -l`やると、socketファイルは先頭が`s`になる
- 通常は無名ファイルで、`sockfs`という専用のファイルシステムで管理される

## 機能
- 異なるプロセス間でデータのやり取りができる（この点、pipeと類似）
    - 使用するファイル数
        - socket: 双方個別に用意し、その間をOSが仲介
        - pipe: 1つを読み書き双方で共有
    - 連携可能な範囲
        - socket: 通信方式による（同一マシン内にとらわれない）
        - pipe: 同一マシン内
    - データやり取りの方向
        - socket: 通信する双方個別に持ったファイルそれぞれで、双方向の通信に対応
        - pipe: 必ず1方向(読み込み側/書き込み側)
    - データやり取りの種別
        - socket: 色々ある（代表的なのはTCP/IPを利用したIPソケット）
        - pipe: 特にない
- 2つのソケットが連携する形なので、通信相手のソケットを識別する方法が必要不可欠
    - IPソケットの場合、IPアドレス＆ポート番号を使用
    - 同一マシン内の通信に特化したUNIXドメインソケットの場合、ソケットにファイル名を識別子として付与する
        - ex. Linux上でsyslogのログ管理に使う`/dev/log`ソケットと、そのソケットに対してログを送信するコマンド`logger`
            - 構成によるが、基本`/dev/log`から読み込みを行うログ管理サーバアプリケーションのデーモンプロセス（syslog daemonやjournald）が`logger`のログ送信を受け付けている

Ubuntu22.04LTSでの実行結果
```bash
ubuntu@lts:/var/log$ logger hello
ubuntu@lts:/var/log$ tail -n 1 syslog
Feb  1 15:03:39 lts ubuntu: hello
```

図：パイプとソケット
<img src="https://camo.qiitausercontent.com/033ad0b73434f36904d3966cb6169b02136f7a88/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f37343339362f38306531373864662d306131362d306135652d383030642d3262326465663438313464612e706e67" alt="diff-btw-pipe-socket" width="300px">

図：loggerとソケット
<img src="https://camo.qiitausercontent.com/ef6df83c59c3a51eedf1040edcb6c5f563b7a980/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f37343339362f61623364376334342d326235632d353938342d326263312d6434393263343265393239622e706e67" alt="logger" width="300px">

画像出典：Referenceに記載した記事

## Reference
- LINUX教科書LPICレベル1
- [Linuxのファイルの種類](https://qiita.com/angel_p_57/items/1faafa275525469788b4)
